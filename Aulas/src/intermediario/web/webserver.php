<?php

ini_set('error_reporting', E_ERROR);
date_default_timezone_set('America/Sao_Paulo');

header("Content-Type: application/json; charset=UTF-8");

function rand_float($n1=0,$n2=1,$mul=1000000000000000000){
    if ($n1>$n2) return false;
    return mt_rand($n1*$mul,$n2*$mul)/$mul;
}

function rand_color(){
    $letters = '0123456789ABCDEF';
    $color = '#';
    for($i = 0; $i < 6; $i++) {
        $index = rand(0,15);
        $color .= $letters[$index];
    }
    return $color;
}

function rand_value_wave(){
    $value=array();
    for($i = 0; $i < 150; $i++) {
        $value[$i]=rand_float(1.1,2.2);
    }
    return $value;
}

function rand_sensor(){
    $type = array("NOM_TEMP_VEN", "NOM_TEMP_GEN_1", "NOM_PRESS_BLD_VEN_CENT_MEAN");

    $sensorData=array();
    for($i = 0; $i < 3; $i++) {
        $sensor=null;
        $sensor->id = null;
        $sensor->type = $type[mt_rand(0, 2)];
        $sensor->value = mt_rand(30, 40);
        $sensor->unitOfMeasurement = "NOM_DIM_DEGC";
        $sensor->alarm = (bool)random_int(0, 1);
        $sensor->minValue = null;
        $sensor->maxValue = null;
        $sensor->color = rand_color();
        $sensorData[$i]=$sensor;
    }
    return $sensorData;
}

$wave->Timestamp=date('m/d/y h:i:s A');;
$wave->Relativetimestamp=strtotime("now");
$wave->PhysioID=20480;
$wave->Physio="NOM_RESP";
$wave->Value=rand_value_wave();

$patient->pid=null;
$patient->name=null;


$DATA = array("sensorData" =>rand_sensor(), "waveData" => $wave, "patientData" => $patient);

$JSON = json_encode($DATA);

echo $JSON;

/*
{
    "sensorData":[
      {
          "id":null,
         "type":"NOM_TEMP_VEN",
         "value":"37",
         "unitOfMeasurement":"NOM_DIM_DEGC",
         "alarm":false,
         "minValue":null,
         "maxValue":null,
	 "color": "#121545" // hexa decimal da cor
      },
      {
          "id":null,
         "type":"NOM_TEMP_GEN_1",
         "value":"-99",
         "unitOfMeasurement":"NOM_DIM_DEGC",
         "alarm":false,
         "minValue":null,
         "maxValue":null,
	 "color": "#121545" // hexa decimal da cor
      },
      {
          "id":null,
         "type":"NOM_PRESS_BLD_VEN_CENT_MEAN",
         "value":"-99",
         "unitOfMeasurement":"NOM_DIM_MMHG",
         "alarm":false,
         "minValue":null,
         "maxValue":null,
	 "color": "#121545" // hexa decimal da cor
      }
   ],
   "waveData":[
      {
          "Timestamp":"12/11/2018 1:25:05 PM",
         "Relativetimestamp":"4003151872",
         "PhysioID":20480,
         "Physio":"NOM_RESP",
         "Value":[
          1.93508207881719,
          1.9353657565760385,
          1.935931205451539,
          1.936494130007572,
          1.9371942681697247,
          1.93802932876759,
          1.9388588855749014,
          1.9399565174958335,
          1.9413152087250432,
          1.9427929732256311,
          1.9443854538659142,
          1.9463479758789402,
          1.9485355281680923,
          1.9508106832156515,
          1.953290791120698,
          1.9557223411709137,
          1.9583430683730563,
          1.961024793387911,
          1.9639877177731819,
          1.9668809654475228,
          1.9699223271991275,
          1.9728899461396272,
          1.9758893427861117,
          1.9789163199454698,
          1.9818696766500299,
          1.9847527311974318,
          1.9875685866923447,
          1.9904107928444461,
          1.9932758563659478,
          1.9960740594058335,
          1.9988082976901305,
          2.0015638585008295,
          1.8988697703162136,
          1.8979246029131194,
          1.897163502803344,
          1.8965897487341561,
          1.8962058396583761,
          1.8962058396583761,
          1.8965897487341561,
          1.897163502803344,
          1.8979246029131194,
          1.8988697703162136,
          1.8999949901550044,
          1.9011105621708029,
          1.9022166412717072,
          1.9033133787442189,
          1.9044009223639669,
          1.905479416502267,
          1.9413152087250432,
          1.9427929732256311,
          1.9443854538659142,
          1.9463479758789402,
          1.9485355281680923,
          1.9508106832156515,
          1.953290791120698,
          1.9557223411709137,
          1.9583430683730563,
          1.961024793387911,
          1.9639877177731819,
          1.9668809654475228,
          1.9699223271991275,
          1.9728899461396272,
          1.9758893427861117,
          1.9789163199454698,
          1.8979246029131194,
          1.8988697703162136,
          1.8999949901550044,
          1.9011105621708029,
          1.9022166412717072,
          1.9033133787442189,
          1.9044009223639669,
          1.905479416502267,
          1.9065490022286931,
          1.9076098174098464,
          1.9086619968044825,
          1.9097056721551591,
          1.9105689984888319,
          1.9112555211012812,
          1.9121085616340825,
          1.9127869479585684,
          2.0440464325493903,
          2.0426610115959156,
          2.0411410278266588,
          2.0396006758778573,
          2.0379789589168844,
          2.0362113217630604,
          2.0342913648364611,
          2.0322754639434981,
          2.0301591634950964,
          2.0279376105472875,
          2.0256727945959483,
          2.0233630888210015,
          2.0209367475605129,
          2.0184590319463158,
          2.0158547115044079,
          2.0131165341439474,
          1.9520569211690477,
          1.9477678210337204,
          1.9433260527462659,
          1.9389966147561633,
          1.9346553629119727,
          1.9304544137477688,
          1.9264138653354737,
          1.9227111845862184,
          1.919058989863043,
          1.9154652618677601,
          1.9121085616340825,
          1.9091848893667889,
          1.9065490022286931,
          1.9040394203825319,
          1.901848993594436,
          1.9001815845829135,
          1.8988697703162136,
          1.8979246029131194,
          1.897163502803344,
          1.8965897487341561,
          1.8962058396583761,
          1.8962058396583761,
          1.8965897487341561,
          1.897163502803344,
          1.8979246029131194,
          1.8988697703162136,
          1.8999949901550044,
          1.9011105621708029,
          1.9022166412717072,
          1.9033133787442189,
          1.9044009223639669,
          1.905479416502267,
          1.9329339326045023,
          1.9329339326045023,
          1.9330782842596712,
          1.9330782842596712,
          1.9332224712633668,
          1.9332224712633668,
          1.9333664939701036,
          1.9333664939701036,
          1.9335103527332758,
          1.9335103527332758,
          1.9336540479051636,
          1.9336540479051636,
          1.9337975798369365,
          1.9337975798369365,
          1.933940948878659,
          1.933940948878659
      ]
      }
   ],
   "patientData":{
    "pid":null,
      "name":null
   }
}

*/

?>